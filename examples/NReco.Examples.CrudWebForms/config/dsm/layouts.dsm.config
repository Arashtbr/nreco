<?xml version="1.0" encoding="utf-8" ?>
<?xml-stylesheet type="text/xsl" href="../xsl/model-webforms-layout.xsl" output-base-path="../../templates/generated/" output-file="*"?>
<model xmlns="urn:schemas-nreco:webforms:layout:v2">

	<views>

		<view name="BookList">

			<updatepanel>
				<list datakey="id" add="true" edit="true">
					<datasource>
						<dalc from="dsDalc" tablename="books" id="bookDS">
							<relation name="author_ids" datakeyname="id">
								<mapper table="book_to_author" fromfield="book_id" tofield="author_id"/>
							</relation>
						</dalc>
					</datasource>

					<field name="title" caption="Title">
						<editor>
							<textbox/>
							<validators>
								<required/>
							</validators>
						</editor>
					</field>

					<field name="author_ids" caption="Authors">
						<renderer>
							<expression><code>DataBinder.Eval(Container.DataItem, "author_ids.Length")</code></expression>
						</renderer>
						<editor>
							<checkboxlist>
								<lookup name="getAuthorsList" text="name" value="id"/>
							</checkboxlist>
						</editor>
					</field>

					<field edit="false" add="false">
						<renderer>
							<linkbutton command="Edit" caption="Edit" validate="true"/>
							<linkbutton command="Delete" caption="Delete"/>
						</renderer>
					</field>

					<field view="false" edit="false">
						<renderer>
							<linkbutton command="Insert" caption="Add" validate="true"/>
						</renderer>
					</field>

					<field view="false" add="false">
						<renderer>
							<linkbutton command="Update" caption="Save" validate="true"/>
							<linkbutton command="Cancel" caption="Cancel" validate="true"/>
						</renderer>
					</field>					

				</list>
			</updatepanel>
			
		</view>
	</views>

	<settings>
		<services>
			<datasetfactory name="dsFactory"/>
		</services>
		<list>
			<styles>
				<listtable class="table" pagerrowclass="pagerrow"/>
			</styles>
		</list>
	</settings>

</model>
